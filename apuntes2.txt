# FESTIFY API EDU - ExplicaciÃ³n por Carpetas y Archivos

## ğŸ“ RAÃZ DEL PROYECTO

### ğŸ“„ pom.xml
**Â¿QuÃ© hace?** Es el archivo de configuraciÃ³n de Maven que gestiona las dependencias y el ciclo de vida del proyecto.
- Define informaciÃ³n del proyecto (nombre, versiÃ³n, descripciÃ³n)
- Lista todas las librerÃ­as que necesita el proyecto (Spring Boot, PostgreSQL, etc.)
- Configura plugins para compilar, ejecutar tests y crear JARs
- **Ejemplo:** Incluye spring-boot-starter-web para crear la API REST

### ğŸ“„ docker-compose.yml
**Â¿QuÃ© hace?** Define los servicios de Docker que necesita la aplicaciÃ³n.
- Configura una base de datos PostgreSQL en un contenedor
- Establece variables de entorno (nombre DB: festify, usuario: user, password: secret)
- Mapea el puerto 5432 para conectar desde la aplicaciÃ³n
- **Para quÃ©:** Para levantar la BD sin instalar PostgreSQL en tu mÃ¡quina

### ğŸ“„ mvnw / mvnw.cmd
**Â¿QuÃ© hace?** Son scripts de Maven Wrapper.
- mvnw para sistemas Unix/Linux/Mac
- mvnw.cmd para Windows
- Permiten ejecutar Maven sin instalarlo globalmente
- **Uso:** `./mvnw spring-boot:run` para arrancar la aplicaciÃ³n

### ğŸ“„ README.md
**Â¿QuÃ© hace?** DocumentaciÃ³n del proyecto en formato Markdown.
- Explica quÃ© hace el proyecto
- Instrucciones de instalaciÃ³n y ejecuciÃ³n
- InformaciÃ³n para otros desarrolladores

### ğŸ“„ .gitignore
**Â¿QuÃ© hace?** Lista de archivos que Git debe ignorar.
- Excluye carpeta target/ (archivos compilados)
- Ignora archivos de configuraciÃ³n del IDE
- Evita subir archivos temporales o sensibles

---

## ğŸ“ .mvn/wrapper/

### ğŸ“„ maven-wrapper.properties
**Â¿QuÃ© hace?** ConfiguraciÃ³n del Maven Wrapper.
- Define quÃ© versiÃ³n de Maven descargar automÃ¡ticamente
- Asegura que todos usen la misma versiÃ³n de Maven

---

## ğŸ“ src/main/ (CÃ“DIGO FUENTE PRINCIPAL)

### ğŸ“ src/main/java/com/GeorgeDavidDAM2/festify_apiEdu/

#### ğŸ“„ FestifyApiEduApplication.java
**Â¿QuÃ© hace?** Es el punto de entrada de toda la aplicaciÃ³n Spring Boot.
- Contiene el mÃ©todo main() que arranca la aplicaciÃ³n
- AnotaciÃ³n @SpringBootApplication que configura todo automÃ¡ticamente
- **FunciÃ³n:** Cuando ejecutas la app, este archivo se ejecuta primero

---

### ğŸ“ web/controller/

#### ğŸ“„ ArtistController.java
**Â¿QuÃ© hace?** Es la PUERTA DE ENTRADA para las peticiones HTTP sobre artistas.
- **@RestController:** Marca esta clase como controlador REST
- **@GetMapping("/artists"):** Cuando alguien haga GET a /artists, ejecuta listArtists()
- **@GetMapping("/artists/{id}"):** Para obtener un artista especÃ­fico por ID
- **FunciÃ³n:** Recibe peticiones HTTP â†’ llama al Service â†’ devuelve JSON al cliente

---

### ğŸ“ services/

#### ğŸ“„ ArtistService.java
**Â¿QuÃ© hace?** Es la INTERFAZ que define quÃ© operaciones podemos hacer con artistas.
- Define el mÃ©todo listArtists() pero no lo implementa
- **PatrÃ³n:** Separar la definiciÃ³n de la implementaciÃ³n
- **Ventaja:** Podemos cambiar la implementaciÃ³n sin tocar el controlador

#### ğŸ“ impl/
##### ğŸ“„ ArtistServiceImpl.java
**Â¿QuÃ© hace?** Es la IMPLEMENTACIÃ“N REAL de las operaciones de negocio.
- **@Service:** Marca esta clase como servicio de Spring
- Implementa ArtistService (listArtists())
- **LÃ³gica:** Obtiene datos del Repository â†’ los convierte con Mapper â†’ devuelve DTOs
- **FunciÃ³n:** AquÃ­ van las reglas de negocio (validaciones, cÃ¡lculos, etc.)

---

### ğŸ“ dto/response/

#### ğŸ“„ ArtistResumeResponse.java
**Â¿QuÃ© hace?** Define la ESTRUCTURA de datos que se envÃ­a al cliente como respuesta.
- Es un Record (Java 14+) que es inmutable
- **Campos:** id, name, genres, country, listeners, status, festivals
- **FunciÃ³n:** Controla exactamente quÃ© informaciÃ³n se expone en la API
- **Ventaja:** No expone datos internos de la BD, solo lo que el cliente necesita

---

### ğŸ“ mapper/

#### ğŸ“„ ArtistMapper.java
**Â¿QuÃ© hace?** CONVIERTE datos entre diferentes formatos.
- Transforma ArtistEntity (BD) â†’ ArtistResumeResponse (API)
- **Conversiones:** listeners de Double a Integer, aÃ±ade valores por defecto
- **FunciÃ³n:** Separa la estructura de BD de la estructura de respuesta
- **MÃ©todo principal:** toArtistResumeResponse()

---

### ğŸ“ persistence/jpa/entity/

#### ğŸ“„ ArtistEntity.java
**Â¿QuÃ© hace?** MAPEA la tabla de base de datos a un objeto Java.
- **@Entity:** Marca que es una entidad JPA
- **@Table(name = "artists"):** Se mapea con la tabla "artists"
- **@Id + @GeneratedValue:** Define la clave primaria auto-generada
- **Campos:** id, name, genres, country, listeners, status
- **FunciÃ³n:** Representa UN REGISTRO de la tabla artists en forma de objeto Java

#### ğŸ“ repository/
##### ğŸ“„ ArtistJpaRepository.java
**Â¿QuÃ© hace?** INTERFAZ para acceso a datos automÃ¡tico.
- Extiende JpaRepository<ArtistEntity, Long>
- **AutomÃ¡tico:** Spring genera mÃ©todos como findAll(), save(), findById()
- **Sin cÃ³digo:** No necesitas escribir SQL, JPA lo hace automÃ¡ticamente
- **FunciÃ³n:** Abstrae completamente las operaciones de base de datos

---

### ğŸ“ src/main/resources/

#### ğŸ“„ application.yml
**Â¿QuÃ© hace?** CONFIGURACIÃ“N de la aplicaciÃ³n Spring Boot.
- **spring.datasource:** ConexiÃ³n a PostgreSQL (URL, usuario, contraseÃ±a)
- **spring.jpa:** ConfiguraciÃ³n de Hibernate (mostrar SQL, validar esquema)
- **FunciÃ³n:** Todos los parÃ¡metros de configuraciÃ³n en un solo lugar

#### ğŸ“ db/migration/
##### ğŸ“„ V1__init.postgresql.sql
**Â¿QuÃ© hace?** SCRIPT de migraciÃ³n de base de datos (Flyway).
- **V1:** NÃºmero de versiÃ³n de la migraciÃ³n
- Crea la tabla "artists" con todos sus campos y tipos
- Define Ã­ndices para bÃºsquedas rÃ¡pidas
- **FunciÃ³n:** Versiona los cambios de BD, asegura que todos tengan la misma estructura

---

## ğŸ“ src/test/ (PRUEBAS)

### ğŸ“ src/test/java/com/GeorgeDavidDAM2/festify_apiEdu/

#### ğŸ“„ FestifyApiEduApplicationTests.java
**Â¿QuÃ© hace?** Prueba bÃ¡sica que verifica que la aplicaciÃ³n arranca correctamente.
- **@SpringBootTest:** Carga el contexto completo de Spring
- **FunciÃ³n:** Test de humo para asegurar que no hay errores graves de configuraciÃ³n

#### ğŸ“„ TestFestifyApiEduApplication.java
**Â¿QuÃ© hace?** ConfiguraciÃ³n de aplicaciÃ³n especÃ­fica para tests.
- VersiÃ³n de la app principal pero adaptada para pruebas
- Puede tener configuraciÃ³n diferente (BD en memoria, mocks, etc.)

#### ğŸ“„ TestcontainersConfiguration.java
**Â¿QuÃ© hace?** ConfiguraciÃ³n para usar Testcontainers.
- Permite crear contenedores Docker durante las pruebas
- **Ventaja:** Tests con BD real (PostgreSQL) en lugar de H2
- **FunciÃ³n:** Tests mÃ¡s realistas y confiables

---

## ğŸ”„ FLUJO COMPLETO DE CARPETAS

1. **docker-compose.yml** â†’ Levanta PostgreSQL
2. **V1__init.postgresql.sql** â†’ Crea la estructura de BD
3. **application.yml** â†’ Configura conexiÃ³n a BD
4. **FestifyApiEduApplication.java** â†’ Arranca la app
5. **ArtistController** â†’ Recibe peticiÃ³n HTTP
6. **ArtistService** â†’ Procesa lÃ³gica de negocio
7. **ArtistJpaRepository** â†’ Consulta la BD
8. **ArtistEntity** â†’ Mapea datos de BD
9. **ArtistMapper** â†’ Convierte Entity â†’ DTO
10. **ArtistResumeResponse** â†’ Devuelve JSON al cliente

---

## ğŸ¯ RESUMEN POR RESPONSABILIDAD

- **ğŸ“ controller/**: Maneja peticiones HTTP
- **ğŸ“ services/**: LÃ³gica de negocio
- **ğŸ“ persistence/**: Acceso a datos
- **ğŸ“ dto/**: Estructuras de respuesta
- **ğŸ“ mapper/**: Conversiones entre capas
- **ğŸ“ resources/**: ConfiguraciÃ³n y migraciones
- **ğŸ“ test/**: Pruebas automatizadas